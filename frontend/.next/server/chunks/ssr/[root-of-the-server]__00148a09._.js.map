{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/utils/api.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\n  withCredentials: true,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,iBAAiB;IACjB,SAAS;QACP,gBAAgB;IAClB;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/app/game/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport api from \"@/utils/api\";\nimport { User } from \"@/types/auth.types\";\n\nexport default function GameLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const response = await api.get(\"/auth/status\");\n        if (response.data.isAuthenticated) {\n          setUser(response.data.user);\n        } else {\n          router.push(\"/login?redirect=\" + encodeURIComponent(pathname));\n        }\n      } catch (error) {\n        console.error(\"Auth check error:\", error);\n        router.push(\"/login?redirect=\" + encodeURIComponent(pathname));\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, [router, pathname]);\n\n  // Kiểm tra xem đường dẫn hiện tại có phải là trang gameplay không\n  const isGameplayPage = pathname.includes(\"/game/play/\");\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-pulse text-2xl font-bold mb-4\">\n            Đang tải...\n          </div>\n          <div className=\"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  // Nếu là trang gameplay, không hiển thị header và footer\n  if (isGameplayPage) {\n    return <>{children}</>;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white flex flex-col\">\n      {/* Header */}\n      <header className=\"bg-gray-800 border-b border-gray-700\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center space-x-8\">\n              <Link href=\"/game\" className=\"text-2xl font-bold\">\n                Thế Giới Phiêu Lưu\n              </Link>\n\n              <nav className=\"hidden md:flex space-x-6\">\n                <Link\n                  href=\"/game\"\n                  className={`transition-colors ${\n                    pathname === \"/game\"\n                      ? \"text-blue-400\"\n                      : \"text-gray-300 hover:text-white\"\n                  }`}\n                >\n                  Trang Chủ\n                </Link>\n                <Link\n                  href=\"/game/characters\"\n                  className={`transition-colors ${\n                    pathname.includes(\"/game/characters\")\n                      ? \"text-blue-400\"\n                      : \"text-gray-300 hover:text-white\"\n                  }`}\n                >\n                  Nhân Vật\n                </Link>\n                <Link\n                  href=\"/game/sessions\"\n                  className={`transition-colors ${\n                    pathname.includes(\"/game/sessions\")\n                      ? \"text-blue-400\"\n                      : \"text-gray-300 hover:text-white\"\n                  }`}\n                >\n                  Phiên Game\n                </Link>\n              </nav>\n            </div>\n\n            <div className=\"flex items-center space-x-4\">\n              {user && (\n                <div className=\"flex items-center\">\n                  <div className=\"hidden md:block mr-4\">\n                    <div className=\"font-medium\">\n                      {user.firstName && user.lastName\n                        ? `${user.firstName} ${user.lastName}`\n                        : user.firstName || user.lastName || \"Người chơi\"}\n                    </div>\n                    <div className=\"text-sm text-gray-400\">{user.email}</div>\n                  </div>\n\n                  <div className=\"relative group\">\n                    <button className=\"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center\">\n                      {user.profilePicture ? (\n                        <Image\n                          src={user.profilePicture}\n                          alt=\"Avatar\"\n                          width={40}\n                          height={40}\n                          className=\"w-full h-full rounded-full\"\n                        />\n                      ) : (\n                        <span className=\"text-lg font-bold\">\n                          {(user.firstName || user.lastName || \"U\")\n                            .charAt(0)\n                            .toUpperCase()}\n                        </span>\n                      )}\n                    </button>\n\n                    <div className=\"absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg overflow-hidden z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300\">\n                      <div className=\"py-2\">\n                        <Link\n                          href=\"/dashboard\"\n                          className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white\"\n                        >\n                          Trang Cá Nhân\n                        </Link>\n                        <Link\n                          href=\"/game/characters\"\n                          className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white\"\n                        >\n                          Nhân Vật Của Tôi\n                        </Link>\n                        <Link\n                          href=\"/game/sessions\"\n                          className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white\"\n                        >\n                          Phiên Game\n                        </Link>\n                        <hr className=\"border-gray-700 my-1\" />\n                        <button\n                          onClick={async () => {\n                            try {\n                              await api.post(\"/auth/logout\");\n                              router.push(\"/\");\n                            } catch (error) {\n                              console.error(\"Logout error:\", error);\n                            }\n                          }}\n                          className=\"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300\"\n                        >\n                          Đăng Xuất\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"flex-1\">{children}</main>\n\n      {/* Footer */}\n      <footer className=\"bg-gray-800 border-t border-gray-700 py-6\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"flex flex-col md:flex-row justify-between items-center\">\n            <div className=\"mb-4 md:mb-0\">\n              <div className=\"text-lg font-bold mb-1\">Thế Giới Phiêu Lưu</div>\n              <div className=\"text-sm text-gray-400\">\n                © 2024 Tất cả quyền được bảo lưu\n              </div>\n            </div>\n\n            <div className=\"flex space-x-6\">\n              <Link\n                href=\"/\"\n                className=\"text-gray-400 hover:text-white transition-colors\"\n              >\n                Trang Chủ\n              </Link>\n              <Link\n                href=\"/game\"\n                className=\"text-gray-400 hover:text-white transition-colors\"\n              >\n                Game\n              </Link>\n              <Link\n                href=\"/dashboard\"\n                className=\"text-gray-400 hover:text-white transition-colors\"\n              >\n                Trang Cá Nhân\n              </Link>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}