{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/utils/api.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Add a request interceptor to add the auth token to every request\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    // Check if we're in a browser environment\r\n    if (typeof window !== 'undefined') {\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add a response interceptor to handle token expiration\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // Handle 401 responses (unauthorized)\r\n    if (error.response && error.response.status === 401) {\r\n      // Check if we're in a browser environment\r\n      if (typeof window !== 'undefined') {\r\n        // Clear the token\r\n        localStorage.removeItem('token');\r\n        \r\n        // Redirect to login page if not already there\r\n        if (!window.location.pathname.includes('/auth/login')) {\r\n          window.location.href = '/auth/login';\r\n        }\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,mEAAmE;AACnE,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,0CAA0C;IAC1C,uCAAmC;;IAKnC;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,wDAAwD;AACxD,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC;IACC,OAAO;AACT,GACA,CAAC;IACC,sCAAsC;IACtC,IAAI,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;QACnD,0CAA0C;QAC1C,uCAAmC;;QAQnC;IACF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/app/auth/login/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport api from \"@/utils/api\";\n\nexport default function Login() {\n  const router = useRouter();\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setError(\"\");\n    setIsLoading(true);\n\n    try {\n      const response = await api.post(\"/auth/login\", formData);\n      localStorage.setItem(\"token\", response.data.access_token);\n      router.push(\"/dashboard\");\n    } catch (err: unknown) {\n      console.error(\"Login error:\", err);\n      if (typeof err === \"object\" && err !== null && \"response\" in err) {\n        const apiError = err as {\n          response?: {\n            data?: {\n              message?: string;\n            };\n          };\n        };\n        if (apiError.response?.data?.message) {\n          setError(apiError.response.data.message);\n        } else {\n          setError(\n            \"Failed to login. Please check your credentials and try again.\"\n          );\n        }\n      } else {\n        setError(\n          \"Failed to login. Please check your credentials and try again.\"\n        );\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleGoogleLogin = () => {\n    window.location.href = `${process.env.NEXT_PUBLIC_API_URL}/auth/google`;\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col justify-center items-center bg-gradient-to-b from-gray-900 to-gray-800 px-4 py-12\">\n      <div className=\"w-full max-w-md bg-gray-800 border border-gray-700 rounded-xl shadow-xl p-8\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-3xl font-bold text-white\">Welcome Back</h2>\n          <p className=\"mt-2 text-gray-400\">Sign in to your AI companion</p>\n        </div>\n\n        {error && (\n          <div className=\"mb-6 p-3 bg-red-900/50 border border-red-500 rounded-md text-red-200 text-sm\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div>\n            <label\n              htmlFor=\"email\"\n              className=\"block text-sm font-medium text-gray-300 mb-1\"\n            >\n              Email Address\n            </label>\n            <input\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              autoComplete=\"email\"\n              required\n              value={formData.email}\n              onChange={handleChange}\n              className=\"w-full px-4 py-3 bg-gray-700 border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded-lg text-white\"\n              placeholder=\"Enter your email\"\n            />\n          </div>\n\n          <div>\n            <div className=\"flex items-center justify-between mb-1\">\n              <label\n                htmlFor=\"password\"\n                className=\"block text-sm font-medium text-gray-300\"\n              >\n                Password\n              </label>\n              <Link\n                href=\"/auth/forgot-password\"\n                className=\"text-sm text-blue-400 hover:text-blue-300\"\n              >\n                Forgot password?\n              </Link>\n            </div>\n            <input\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              autoComplete=\"current-password\"\n              required\n              value={formData.password}\n              onChange={handleChange}\n              className=\"w-full px-4 py-3 bg-gray-700 border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded-lg text-white\"\n              placeholder=\"Enter your password\"\n            />\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-lg px-4 py-3 font-medium flex items-center justify-center\"\n            >\n              {isLoading ? (\n                <svg\n                  className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle\n                    className=\"opacity-25\"\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"10\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"4\"\n                  ></circle>\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  ></path>\n                </svg>\n              ) : null}\n              Sign In\n            </button>\n          </div>\n        </form>\n\n        <div className=\"mt-6\">\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 flex items-center\">\n              <div className=\"w-full border-t border-gray-600\"></div>\n            </div>\n            <div className=\"relative flex justify-center text-sm\">\n              <span className=\"px-2 bg-gray-800 text-gray-400\">\n                Or continue with\n              </span>\n            </div>\n          </div>\n\n          <div className=\"mt-6\">\n            <button\n              onClick={handleGoogleLogin}\n              className=\"w-full flex justify-center items-center gap-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg px-4 py-3 font-medium\"\n            >\n              <svg className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\n                <path\n                  fill=\"currentColor\"\n                  d=\"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z\"\n                />\n              </svg>\n              Sign in with Google\n            </button>\n          </div>\n        </div>\n\n        <p className=\"mt-8 text-center text-sm text-gray-400\">\n          Don&apos;t have an account?{\" \"}\n          <Link\n            href=\"/auth/register\"\n            className=\"text-blue-400 hover:text-blue-300 font-medium\"\n          >\n            Sign up\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}