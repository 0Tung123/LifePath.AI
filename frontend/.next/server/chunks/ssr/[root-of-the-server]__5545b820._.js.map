{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/app/verify-email/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, Suspense } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\n\nfunction VerifyEmailContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const email = searchParams.get(\"email\");\n  const token = searchParams.get(\"token\");\n\n  const [loading, setLoading] = useState(false);\n  const [verified, setVerified] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    // Nếu có token, thực hiện xác minh email\n    if (token) {\n      const verifyEmail = async () => {\n        try {\n          setLoading(true);\n\n          await axios.post(\"/api/auth/verify-email\", { token });\n\n          setVerified(true);\n          setLoading(false);\n        } catch (err: unknown) {\n          const error = err as { response?: { data?: { message?: string } } };\n          console.error(\"Verification error:\", err);\n          setError(\n            error.response?.data?.message ||\n              \"Xác minh email thất bại. Vui lòng thử lại.\"\n          );\n          setLoading(false);\n        }\n      };\n\n      verifyEmail();\n    }\n  }, [token]);\n\n  const handleResendVerification = async () => {\n    if (!email) {\n      setError(\"Không có địa chỉ email để gửi lại xác minh\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      await axios.post(\"/api/auth/resend-verification\", { email });\n\n      router.push(\"/resend-verification/success\");\n    } catch (err: unknown) {\n      const error = err as { response?: { data?: { message?: string } } };\n      console.error(\"Resend verification error:\", err);\n      setError(\n        error.response?.data?.message ||\n          \"Gửi lại email xác minh thất bại. Vui lòng thử lại.\"\n      );\n      setLoading(false);\n    }\n  };\n\n  // Nếu đang xác minh token\n  if (token && loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-pulse text-2xl font-bold mb-4\">\n            Đang xác minh email...\n          </div>\n          <div className=\"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  // Nếu xác minh thành công\n  if (verified) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full bg-gray-800 rounded-xl shadow-lg p-8 text-center\">\n          <div className=\"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-10 w-10\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M5 13l4 4L19 7\"\n              />\n            </svg>\n          </div>\n\n          <h1 className=\"text-3xl font-bold mb-4\">Email đã được xác minh!</h1>\n          <p className=\"text-gray-400 mb-8\">\n            Tài khoản của bạn đã được kích hoạt thành công. Bây giờ bạn có thể\n            đăng nhập và bắt đầu cuộc phiêu lưu.\n          </p>\n\n          <Link\n            href=\"/login\"\n            className=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors inline-block font-bold\"\n          >\n            Đăng nhập ngay\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  // Trang chờ xác minh email\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full bg-gray-800 rounded-xl shadow-lg p-8 text-center\">\n        <div className=\"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-10 w-10\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n            />\n          </svg>\n        </div>\n\n        <h1 className=\"text-3xl font-bold mb-4\">Xác minh email của bạn</h1>\n        <p className=\"text-gray-400 mb-6\">\n          Chúng tôi đã gửi một email xác minh đến{\" \"}\n          <span className=\"text-white font-medium\">\n            {email || \"địa chỉ email của bạn\"}\n          </span>\n          . Vui lòng kiểm tra hộp thư đến và nhấp vào liên kết xác minh.\n        </p>\n\n        {error && (\n          <div className=\"mb-6 p-3 bg-red-900/50 text-red-200 rounded-lg\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          <button\n            onClick={handleResendVerification}\n            disabled={loading}\n            className={`w-full py-3 rounded-lg text-white font-bold transition-colors ${\n              loading\n                ? \"bg-blue-700 cursor-wait\"\n                : \"bg-blue-600 hover:bg-blue-700\"\n            }`}\n          >\n            {loading ? (\n              <div className=\"flex items-center justify-center\">\n                <svg\n                  className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <circle\n                    className=\"opacity-25\"\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"10\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"4\"\n                  ></circle>\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  ></path>\n                </svg>\n                Đang gửi...\n              </div>\n            ) : (\n              \"Gửi lại email xác minh\"\n            )}\n          </button>\n\n          <Link\n            href=\"/login\"\n            className=\"block w-full py-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors font-bold\"\n          >\n            Quay lại đăng nhập\n          </Link>\n        </div>\n\n        <div className=\"mt-8 text-sm text-gray-400\">\n          <p>\n            Nếu bạn không nhận được email, vui lòng kiểm tra thư mục spam hoặc\n            thử lại với một địa chỉ email khác.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function VerifyEmailPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-pulse text-2xl font-bold mb-4\">\n            Đang tải...\n          </div>\n          <div className=\"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto\"></div>\n        </div>\n      </div>\n    }>\n      <VerifyEmailContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}