(()=>{var e={};e.id=925,e.ids=[925],e.modules={440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},970:(e,r,t)=>{Promise.resolve().then(t.bind(t,9519))},1630:e=>{"use strict";e.exports=require("http")},1820:e=>{"use strict";e.exports=require("os")},1996:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(687);t(3210);let a=({size:e="medium",message:r="Đang tải..."})=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,s.jsx)("div",{className:`${{small:"w-5 h-5",medium:"w-8 h-8",large:"w-12 h-12"}[e]} animate-spin rounded-full border-b-2 border-primary`}),r&&(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r})]})},2412:e=>{"use strict";e.exports=require("assert")},2818:(e,r,t)=>{Promise.resolve().then(t.bind(t,3486))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3486:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"d:\\\\my-fullstack-app\\\\frontend\\\\src\\\\app\\\\game\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"d:\\my-fullstack-app\\frontend\\src\\app\\game\\page.tsx","default")},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6189:(e,r,t)=>{"use strict";var s=t(5773);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},7371:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var s=t(5239),a=t(8088),i=t(8170),n=t.n(i),l=t(893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(r,d);let c={children:["",{children:["game",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3486)),"d:\\my-fullstack-app\\frontend\\src\\app\\game\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"d:\\my-fullstack-app\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["d:\\my-fullstack-app\\frontend\\src\\app\\game\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/game/page",pathname:"/game",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7396:(e,r,t)=>{"use strict";t.d(r,{A:()=>d});var s=t(687);t(3210);var a=t(3721),i=t(7745),n=t(8903);let l={[a._R.FANTASY]:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",[a._R.MODERN]:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",[a._R.SCIFI]:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",[a._R.XIANXIA]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",[a._R.WUXIA]:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",[a._R.HORROR]:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",[a._R.CYBERPUNK]:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",[a._R.STEAMPUNK]:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",[a._R.POSTAPOCALYPTIC]:"bg-lime-100 text-lime-800 dark:bg-lime-900 dark:text-lime-200",[a._R.HISTORICAL]:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},d=({character:e,onSelect:r,onStartGame:t,isSelected:a=!1})=>{let d=e=>{let r=l[e]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r} mr-2 mb-2`,children:e},e)};return(0,s.jsx)(i.A,{className:`h-full transition-all ${a?"ring-2 ring-blue-500 dark:ring-blue-400":""}`,footer:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Lv. ",e.level," • XP: ",e.experience]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[r&&(0,s.jsx)(n.A,{variant:"secondary",size:"sm",onClick:r,children:a?"Đ\xe3 chọn":"Chọn"}),t&&(0,s.jsx)(n.A,{variant:"primary",size:"sm",onClick:t,children:"Bắt đầu"})]})]}),children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("h4",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e.name}),(0,s.jsxs)("div",{className:"mb-4",children:[d(e.primaryGenre),e.secondaryGenres?.map(e=>d(e))]}),(0,s.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4 flex-grow",children:e.description}),e.traits&&e.traits.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Đặc điểm:"}),(0,s.jsx)("div",{className:"flex flex-wrap",children:e.traits.map((e,r)=>(0,s.jsx)("span",{className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 px-2 py-1 rounded text-xs mr-2 mb-1",children:e},r))})]}),e.abilities&&e.abilities.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Kỹ năng:"}),(0,s.jsx)("div",{className:"flex flex-wrap",children:e.abilities.map((e,r)=>(0,s.jsx)("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded text-xs mr-2 mb-1",children:e},r))})]})]})})}},7745:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(687);t(3210);let a=({title:e,children:r,className:t="",footer:a})=>(0,s.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden ${t}`,children:[e&&(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e})}),(0,s.jsx)("div",{className:"px-4 py-4",children:r}),a&&(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-3",children:a})]})},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},8903:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(687);t(3210);let a=({children:e,variant:r="primary",size:t="md",isLoading:a=!1,isFullWidth:i=!1,leftIcon:n,rightIcon:l,className:d="",disabled:c,...o})=>(0,s.jsx)("button",{disabled:c||a,className:`
        ${{primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-500 hover:bg-gray-600 text-white",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",warning:"bg-yellow-500 hover:bg-yellow-600 text-white",info:"bg-cyan-500 hover:bg-cyan-600 text-white"}[r]} 
        ${{sm:"py-1 px-2 text-sm",md:"py-2 px-4 text-base",lg:"py-2.5 px-5 text-lg"}[t]} 
        ${i?"w-full":""} 
        rounded-md font-medium transition duration-150 ease-in-out 
        focus:outline-none focus:ring-2 focus:ring-opacity-50 focus:ring-blue-500
        disabled:opacity-60 disabled:cursor-not-allowed
        ${d}
      `,...o,children:a?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"Đang xử l\xfd..."})]}):(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[n&&(0,s.jsx)("span",{className:"mr-2",children:n}),e,l&&(0,s.jsx)("span",{className:"ml-2",children:l})]})})},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9519:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(687),a=t(3210),i=t(6189),n=t(5814),l=t.n(n),d=t(6386),c=t(5962),o=t(7396),x=t(8903),m=t(7745),h=t(1996);let g=()=>{let e=(0,i.useRouter)(),{isAuthenticated:r,isLoading:t}=(0,c.A)(),{characters:n,gameSessions:g,loadingCharacters:u,loadingSession:p,error:b,fetchCharacters:y,fetchGameSessions:f,startNewGame:v}=(0,d.I)(),[j,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!t&&!r)return void e.push("/auth/login");y(),f()},[t,r,y,f,e]);let k=async r=>{try{N(!0);let t=await v(r);e.push(`/game/${t.id}`)}catch(e){console.error("Failed to start game:",e)}finally{N(!1)}},w=r=>{e.push(`/game/${r}`)};return t||u&&0===n.length?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-900 text-white",children:(0,s.jsx)(h.A,{size:"large",message:"Đang tải..."})}):r?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Nhập Vai A.I Simulator"}),b&&(0,s.jsx)("div",{className:"bg-red-500 text-white p-4 rounded-md mb-6",children:b}),g.length>0&&(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Phi\xean chơi đang hoạt động"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(e=>{let r=n.find(r=>r.id===e.characterId);return r?(0,s.jsxs)(m.A,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>w(e.id),footer:(0,s.jsx)(x.A,{variant:"primary",isFullWidth:!0,onClick:r=>{r.stopPropagation(),w(e.id)},children:"Tiếp tục chơi"}),children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-3",children:r.name}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Cấp độ ",r.level," • ",r.primaryGenre]})}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[(0,s.jsxs)("p",{children:["Bắt đầu: ",new Date(e.startedAt).toLocaleDateString()]}),(0,s.jsxs)("p",{children:["Lần chơi gần nhất: ",new Date(e.updatedAt).toLocaleString()]})]})]},e.id):null})})]}),(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Nh\xe2n vật của bạn"}),(0,s.jsx)(l(),{href:"/game/characters/create",children:(0,s.jsx)(x.A,{variant:"success",leftIcon:(0,s.jsx)("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),children:"Tạo nh\xe2n vật mới"})})]}),u?(0,s.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,s.jsx)(h.A,{message:"Đang tải danh s\xe1ch nh\xe2n vật..."})}):0===n.length?(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,s.jsx)("p",{className:"text-xl mb-4",children:"Bạn chưa c\xf3 nh\xe2n vật n\xe0o"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"H\xe3y tạo nh\xe2n vật đầu ti\xean của bạn để bắt đầu cuộc phi\xeau lưu!"}),(0,s.jsx)(l(),{href:"/game/characters/create",children:(0,s.jsx)(x.A,{variant:"success",children:"Tạo nh\xe2n vật"})})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.slice(0,3).map(e=>(0,s.jsx)("div",{className:"flex flex-col h-full",children:(0,s.jsx)(o.A,{character:e,onStartGame:()=>k(e.id)})},e.id)),n.length>3&&(0,s.jsx)(l(),{href:"/game/characters",className:"col-span-full text-center mt-4",children:(0,s.jsxs)(x.A,{variant:"secondary",children:["Xem tất cả nh\xe2n vật (",n.length,")"]})})]})]}),(0,s.jsxs)(m.A,{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Links nhanh"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(l(),{href:"/game/characters",className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-4 rounded-md transition duration-300 text-center",children:"Quản l\xfd nh\xe2n vật"}),(0,s.jsx)(l(),{href:"/dashboard",className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-4 rounded-md transition duration-300 text-center",children:"Bảng điều khiển"}),(0,s.jsx)(l(),{href:"/",className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-4 rounded-md transition duration-300 text-center",children:"Trang chủ"})]})]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Đăng nhập để tiếp tục"}),(0,s.jsx)("p",{className:"mb-6",children:"Bạn cần đăng nhập để truy cập game."}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(l(),{href:"/auth/login",className:"bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-md transition duration-300",children:"Đăng nhập"})})]})})}},9551:e=>{"use strict";e.exports=require("url")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,60,658,814,623],()=>t(7371));module.exports=s})();