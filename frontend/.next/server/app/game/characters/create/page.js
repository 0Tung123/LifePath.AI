(()=>{var e={};e.id=847,e.ids=[847],e.modules={440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(1658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1135:()=>{},1630:e=>{"use strict";e.exports=require("http")},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},2581:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3410:(e,t,r)=>{Promise.resolve().then(r.bind(r,8939))},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4251:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var n=r(5239),s=r(8088),a=r(8170),i=r.n(a),o=r(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["game",{children:["characters",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8939)),"d:\\my-fullstack-app\\frontend\\src\\app\\game\\characters\\create\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"d:\\my-fullstack-app\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["d:\\my-fullstack-app\\frontend\\src\\app\\game\\characters\\create\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/game/characters/create/page",pathname:"/game/characters/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>l});var n=r(7413),s=r(2376),a=r.n(s),i=r(8726),o=r.n(i);r(1135);let l={title:"Create Next App",description:"Generated by create next app"};function c({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)("body",{className:`${a().variable} ${o().variable} antialiased`,children:e})})}},4437:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6117:()=>{},6189:(e,t,r)=>{"use strict";var n=r(5773);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},6618:(e,t,r)=>{Promise.resolve().then(r.bind(r,6992))},6992:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(687),s=r(3210),a=r(6189),i=r(5814),o=r.n(i),l=r(7327);let c=({onCharacterCreated:e})=>{let t=(0,a.useRouter)(),[r,i]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)("male"),[h,m]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[g,b]=(0,s.useState)([]),[v,f]=(0,s.useState)(""),[y,j]=(0,s.useState)(!1),[N,P]=(0,s.useState)(""),[k,w]=(0,s.useState)(!1),[q,C]=(0,s.useState)({title:"",background:"",introduction:""});(0,s.useEffect)(()=>{(async()=>{try{let e=await l.A.get("/game/genres");b(e.data),e.data.length>0&&f(e.data[0].id)}catch(e){console.error("Lỗi khi lấy danh s\xe1ch thể loại:",e),P("Kh\xf4ng thể tải danh s\xe1ch thể loại game. Vui l\xf2ng thử lại sau.")}})()},[]);let G=async e=>{if(!o||!v)return void P("Vui l\xf2ng nhập t\xean nh\xe2n vật v\xe0 chọn thể loại trước khi tạo gợi \xfd từ AI");j(!0);try{let t=g.find(e=>e.id===v),r=t?t.name:v,n="";"title"===e?n=`Gợi \xfd một ti\xeau đề ngắn gọn cho c\xe2u chuyện về nh\xe2n vật ${o}, một ${"male"===d?"nam":"nữ"} trong thế giới ${r}.`:"background"===e?n=`Gợi \xfd một bối cảnh ngắn gọn (2-3 c\xe2u) cho nh\xe2n vật ${o}, một ${"male"===d?"nam":"nữ"} trong thế giới ${r}.`:"introduction"===e&&(n=`Viết một đoạn giới thiệu ngắn (3-4 c\xe2u) về nh\xe2n vật ${o}, một ${"male"===d?"nam":"nữ"} trong thế giới ${r}. ${h?"Bối cảnh: "+h:""}`);let s=await l.A.post("/ai/generate",{prompt:n});C(t=>({...t,[e]:s.data.content})),"title"===e?i(s.data.content):"background"===e?m(s.data.content):"introduction"===e&&x(s.data.content)}catch(e){console.error("Lỗi khi tạo gợi \xfd từ AI:",e),P("Kh\xf4ng thể tạo gợi \xfd từ AI. Vui l\xf2ng thử lại sau.")}finally{j(!1)}},$=async()=>{if(!o)return void P("Vui l\xf2ng nhập t\xean nh\xe2n vật");w(!0);try{let n=`
        T\xean: ${o}
        Giới t\xednh: ${"male"===d?"Nam":"Nữ"}
        ${h?"Bối cảnh: "+h:""}
        ${p?"Giới thiệu: "+p:""}
      `,s=await l.A.post("/game/characters/generate",{description:n,primaryGenre:v});s.data&&s.data.id&&(await l.A.post(`/game/characters/${s.data.id}/metadata`,{title:r,gender:d,background:h,introduction:p}),e?e(s.data.id):t.push("/game/characters"))}catch(e){console.error("Lỗi khi tạo nh\xe2n vật:",e),P("Kh\xf4ng thể tạo nh\xe2n vật. Vui l\xf2ng thử lại sau.")}finally{w(!1)}};return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-gray-800 rounded-lg shadow-lg text-white",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"Tạo Nh\xe2n Vật Mới"}),N&&(0,n.jsx)("div",{className:"bg-red-500 text-white p-3 rounded-md mb-4",children:N}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ti\xeau đề c\xe2u chuyện"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Nhập ti\xeau đề c\xe2u chuyện của bạn",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("button",{onClick:()=>G("title"),disabled:y,className:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition duration-300 disabled:opacity-50",children:y?"Đang tạo...":"Gợi \xfd"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["T\xean nh\xe2n vật ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Nhập t\xean nh\xe2n vật của bạn",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Giới t\xednh"}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"radio",name:"gender",checked:"male"===d,onChange:()=>u("male"),className:"mr-2"}),"Nam"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"radio",name:"gender",checked:"female"===d,onChange:()=>u("female"),className:"mr-2"}),"Nữ"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Thể loại ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)("select",{value:v,onChange:e=>f(e.target.value),className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Bối cảnh"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"M\xf4 tả bối cảnh của nh\xe2n vật (t\xf9y chọn)",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]"}),(0,n.jsx)("button",{onClick:()=>G("background"),disabled:y,className:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition duration-300 disabled:opacity-50 h-fit",children:y?"Đang tạo...":"Gợi \xfd"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Giới thiệu bản th\xe2n"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("textarea",{value:p,onChange:e=>x(e.target.value),placeholder:"Viết giới thiệu ngắn về nh\xe2n vật của bạn (t\xf9y chọn)",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]"}),(0,n.jsx)("button",{onClick:()=>G("introduction"),disabled:y,className:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition duration-300 disabled:opacity-50 h-fit",children:y?"Đang tạo...":"Gợi \xfd"})]})]}),(0,n.jsx)("div",{className:"flex justify-center mt-8",children:(0,n.jsx)("button",{onClick:$,disabled:k||!o||!v,className:"px-6 py-3 bg-green-600 rounded-md hover:bg-green-700 transition duration-300 disabled:opacity-50 font-bold text-lg",children:k?"Đang tạo nh\xe2n vật...":"Tạo nh\xe2n vật"})})]})]})},d=()=>{let e=(0,a.useRouter)();return(0,n.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Tạo nh\xe2n vật mới"}),(0,n.jsx)(o(),{href:"/game/characters",className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md transition duration-300",children:"Quay lại"})]}),(0,n.jsx)(c,{onCharacterCreated:t=>{e.push("/game/characters")}})]})})}},7327:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let n=r(1060).A.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>e,e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>(e.response&&e.response.status,Promise.reject(e)));let s=n},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},8939:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"d:\\\\my-fullstack-app\\\\frontend\\\\src\\\\app\\\\game\\\\characters\\\\create\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"d:\\my-fullstack-app\\frontend\\src\\app\\game\\characters\\create\\page.tsx","default")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9685:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,145,517,814],()=>r(4251));module.exports=n})();