(()=>{var e={};e.id=847,e.ids=[847],e.modules={440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(1658);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3410:(e,t,a)=>{Promise.resolve().then(a.bind(a,8939))},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4251:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=a(5239),n=a(8088),s=a(8170),i=a.n(s),l=a(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c={children:["",{children:["game",{children:["characters",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8939)),"d:\\my-fullstack-app\\frontend\\src\\app\\game\\characters\\create\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,4431)),"d:\\my-fullstack-app\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["d:\\my-fullstack-app\\frontend\\src\\app\\game\\characters\\create\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/game/characters/create/page",pathname:"/game/characters/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6189:(e,t,a)=>{"use strict";var r=a(5773);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6618:(e,t,a)=>{Promise.resolve().then(a.bind(a,6992))},6992:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(687),n=a(3210),s=a(6189),i=a(5814),l=a.n(i),o=a(7327);let c=({onCharacterCreated:e})=>{let t=(0,s.useRouter)(),[a,i]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)("male"),[h,m]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[g,b]=(0,n.useState)([]),[f,v]=(0,n.useState)(""),[y,j]=(0,n.useState)(!1),[N,k]=(0,n.useState)(""),[w,q]=(0,n.useState)(!1),[P,C]=(0,n.useState)({title:"",background:"",introduction:""});(0,n.useEffect)(()=>{(async()=>{try{let e=await o.A.get("/game/genres");b(e.data),e.data.length>0&&v(e.data[0].id)}catch(e){console.error("Lỗi khi lấy danh s\xe1ch thể loại:",e),k("Kh\xf4ng thể tải danh s\xe1ch thể loại game. Vui l\xf2ng thử lại sau.")}})()},[]);let G=async e=>{if(!l||!f)return void k("Vui l\xf2ng nhập t\xean nh\xe2n vật v\xe0 chọn thể loại trước khi tạo gợi \xfd từ AI");j(!0);try{let t=g.find(e=>e.id===f),a=t?t.name:f,r="";"title"===e?r=`Gợi \xfd một ti\xeau đề ngắn gọn cho c\xe2u chuyện về nh\xe2n vật ${l}, một ${"male"===d?"nam":"nữ"} trong thế giới ${a}.`:"background"===e?r=`Gợi \xfd một bối cảnh ngắn gọn (2-3 c\xe2u) cho nh\xe2n vật ${l}, một ${"male"===d?"nam":"nữ"} trong thế giới ${a}.`:"introduction"===e&&(r=`Viết một đoạn giới thiệu ngắn (3-4 c\xe2u) về nh\xe2n vật ${l}, một ${"male"===d?"nam":"nữ"} trong thế giới ${a}. ${h?"Bối cảnh: "+h:""}`);let n=await o.A.post("/ai/generate",{prompt:r});C(t=>({...t,[e]:n.data.content})),"title"===e?i(n.data.content):"background"===e?m(n.data.content):"introduction"===e&&x(n.data.content)}catch(e){console.error("Lỗi khi tạo gợi \xfd từ AI:",e),k("Kh\xf4ng thể tạo gợi \xfd từ AI. Vui l\xf2ng thử lại sau.")}finally{j(!1)}},S=async()=>{if(!l)return void k("Vui l\xf2ng nhập t\xean nh\xe2n vật");q(!0);try{let r=`
        T\xean: ${l}
        Giới t\xednh: ${"male"===d?"Nam":"Nữ"}
        ${h?"Bối cảnh: "+h:""}
        ${p?"Giới thiệu: "+p:""}
      `,n=await o.A.post("/game/characters/generate",{description:r,primaryGenre:f});n.data&&n.data.id&&(await o.A.post(`/game/characters/${n.data.id}/metadata`,{title:a,gender:d,background:h,introduction:p}),e?e(n.data.id):t.push("/game/characters"))}catch(e){console.error("Lỗi khi tạo nh\xe2n vật:",e),k("Kh\xf4ng thể tạo nh\xe2n vật. Vui l\xf2ng thử lại sau.")}finally{q(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-gray-800 rounded-lg shadow-lg text-white",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"Tạo Nh\xe2n Vật Mới"}),N&&(0,r.jsx)("div",{className:"bg-red-500 text-white p-3 rounded-md mb-4",children:N}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ti\xeau đề c\xe2u chuyện"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"Nhập ti\xeau đề c\xe2u chuyện của bạn",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{onClick:()=>G("title"),disabled:y,className:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition duration-300 disabled:opacity-50",children:y?"Đang tạo...":"Gợi \xfd"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["T\xean nh\xe2n vật ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Nhập t\xean nh\xe2n vật của bạn",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Giới t\xednh"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"gender",checked:"male"===d,onChange:()=>u("male"),className:"mr-2"}),"Nam"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"gender",checked:"female"===d,onChange:()=>u("female"),className:"mr-2"}),"Nữ"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Thể loại ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("select",{value:f,onChange:e=>v(e.target.value),className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Bối cảnh"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"M\xf4 tả bối cảnh của nh\xe2n vật (t\xf9y chọn)",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]"}),(0,r.jsx)("button",{onClick:()=>G("background"),disabled:y,className:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition duration-300 disabled:opacity-50 h-fit",children:y?"Đang tạo...":"Gợi \xfd"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Giới thiệu bản th\xe2n"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("textarea",{value:p,onChange:e=>x(e.target.value),placeholder:"Viết giới thiệu ngắn về nh\xe2n vật của bạn (t\xf9y chọn)",className:"w-full p-3 bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]"}),(0,r.jsx)("button",{onClick:()=>G("introduction"),disabled:y,className:"px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-700 transition duration-300 disabled:opacity-50 h-fit",children:y?"Đang tạo...":"Gợi \xfd"})]})]}),(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsx)("button",{onClick:S,disabled:w||!l||!f,className:"px-6 py-3 bg-green-600 rounded-md hover:bg-green-700 transition duration-300 disabled:opacity-50 font-bold text-lg",children:w?"Đang tạo nh\xe2n vật...":"Tạo nh\xe2n vật"})})]})]})},d=()=>{let e=(0,s.useRouter)();return(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Tạo nh\xe2n vật mới"}),(0,r.jsx)(l(),{href:"/game/characters",className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md transition duration-300",children:"Quay lại"})]}),(0,r.jsx)(c,{onCharacterCreated:t=>{e.push("/game/characters")}})]})})}},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},8939:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"d:\\\\my-fullstack-app\\\\frontend\\\\src\\\\app\\\\game\\\\characters\\\\create\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"d:\\my-fullstack-app\\frontend\\src\\app\\game\\characters\\create\\page.tsx","default")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[447,60,658,814,623],()=>a(4251));module.exports=r})();