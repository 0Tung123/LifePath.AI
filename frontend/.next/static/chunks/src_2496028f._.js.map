{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/utils/api.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  withCredentials: true,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;AAGW;AAHX;;AAEA,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,OAAO;IACP,iBAAiB;IACjB,SAAS;QACP,gBAAgB;IAClB;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/app/game/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport api from \"@/utils/api\";\r\nimport { User } from \"@/types/auth.types\";\r\n\r\nexport default function GameLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      try {\r\n        const response = await api.get(\"/auth/status\");\r\n        if (response.data.isAuthenticated) {\r\n          setUser(response.data.user);\r\n        } else {\r\n          router.push(\"/login?redirect=\" + encodeURIComponent(pathname));\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Auth check error:\", error);\r\n        router.push(\"/login?redirect=\" + encodeURIComponent(pathname));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, [router, pathname]);\r\n\r\n  // Kiểm tra xem đường dẫn hiện tại có phải là trang gameplay không\r\n  const isGameplayPage = pathname.includes(\"/game/play/\");\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-pulse text-2xl font-bold mb-4\">\r\n            Đang tải...\r\n          </div>\r\n          <div className=\"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Nếu là trang gameplay, không hiển thị header và footer\r\n  if (isGameplayPage) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900 text-white flex flex-col\">\r\n      {/* Header */}\r\n      <header className=\"bg-gray-800 border-b border-gray-700\">\r\n        <div className=\"container mx-auto px-4 py-4\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <div className=\"flex items-center space-x-8\">\r\n              <Link href=\"/game\" className=\"text-2xl font-bold\">\r\n                Thế Giới Phiêu Lưu\r\n              </Link>\r\n\r\n              <nav className=\"hidden md:flex space-x-6\">\r\n                <Link\r\n                  href=\"/game\"\r\n                  className={`transition-colors ${\r\n                    pathname === \"/game\"\r\n                      ? \"text-blue-400\"\r\n                      : \"text-gray-300 hover:text-white\"\r\n                  }`}\r\n                >\r\n                  Trang Chủ\r\n                </Link>\r\n                <Link\r\n                  href=\"/game/characters\"\r\n                  className={`transition-colors ${\r\n                    pathname.includes(\"/game/characters\")\r\n                      ? \"text-blue-400\"\r\n                      : \"text-gray-300 hover:text-white\"\r\n                  }`}\r\n                >\r\n                  Nhân Vật\r\n                </Link>\r\n                <Link\r\n                  href=\"/game/sessions\"\r\n                  className={`transition-colors ${\r\n                    pathname.includes(\"/game/sessions\")\r\n                      ? \"text-blue-400\"\r\n                      : \"text-gray-300 hover:text-white\"\r\n                  }`}\r\n                >\r\n                  Phiên Game\r\n                </Link>\r\n              </nav>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-4\">\r\n              {user && (\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"hidden md:block mr-4\">\r\n                    <div className=\"font-medium\">\r\n                      {user.firstName && user.lastName\r\n                        ? `${user.firstName} ${user.lastName}`\r\n                        : user.firstName || user.lastName || \"Người chơi\"}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-400\">{user.email}</div>\r\n                  </div>\r\n\r\n                  <div className=\"relative group\">\r\n                    <button className=\"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center\">\r\n                      {user.profilePicture ? (\r\n                        <Image\r\n                          src={user.profilePicture}\r\n                          alt=\"Avatar\"\r\n                          width={40}\r\n                          height={40}\r\n                          className=\"w-full h-full rounded-full\"\r\n                        />\r\n                      ) : (\r\n                        <span className=\"text-lg font-bold\">\r\n                          {(user.firstName || user.lastName || \"U\")\r\n                            .charAt(0)\r\n                            .toUpperCase()}\r\n                        </span>\r\n                      )}\r\n                    </button>\r\n\r\n                    <div className=\"absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg overflow-hidden z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300\">\r\n                      <div className=\"py-2\">\r\n                        <Link\r\n                          href=\"/dashboard\"\r\n                          className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white\"\r\n                        >\r\n                          Trang Cá Nhân\r\n                        </Link>\r\n                        <Link\r\n                          href=\"/game/characters\"\r\n                          className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white\"\r\n                        >\r\n                          Nhân Vật Của Tôi\r\n                        </Link>\r\n                        <Link\r\n                          href=\"/game/sessions\"\r\n                          className=\"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white\"\r\n                        >\r\n                          Phiên Game\r\n                        </Link>\r\n                        <hr className=\"border-gray-700 my-1\" />\r\n                        <button\r\n                          onClick={async () => {\r\n                            try {\r\n                              await api.post(\"/auth/logout\");\r\n                              router.push(\"/\");\r\n                            } catch (error) {\r\n                              console.error(\"Logout error:\", error);\r\n                            }\r\n                          }}\r\n                          className=\"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300\"\r\n                        >\r\n                          Đăng Xuất\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"flex-1\">{children}</main>\r\n\r\n      {/* Footer */}\r\n      <footer className=\"bg-gray-800 border-t border-gray-700 py-6\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-center\">\r\n            <div className=\"mb-4 md:mb-0\">\r\n              <div className=\"text-lg font-bold mb-1\">Thế Giới Phiêu Lưu</div>\r\n              <div className=\"text-sm text-gray-400\">\r\n                © 2024 Tất cả quyền được bảo lưu\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-6\">\r\n              <Link\r\n                href=\"/\"\r\n                className=\"text-gray-400 hover:text-white transition-colors\"\r\n              >\r\n                Trang Chủ\r\n              </Link>\r\n              <Link\r\n                href=\"/game\"\r\n                className=\"text-gray-400 hover:text-white transition-colors\"\r\n              >\r\n                Game\r\n              </Link>\r\n              <Link\r\n                href=\"/dashboard\"\r\n                className=\"text-gray-400 hover:text-white transition-colors\"\r\n              >\r\n                Trang Cá Nhân\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}