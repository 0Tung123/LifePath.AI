(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{4195:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(5155);a(2115);let s=e=>{let{title:r,children:a,className:s="",footer:n}=e;return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden ".concat(s),children:[r&&(0,t.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r})}),(0,t.jsx)("div",{className:"px-4 py-4",children:a}),n&&(0,t.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-3",children:n})]})}},4595:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var t=a(5155),s=a(2115),n=a(5695),l=a(6874),i=a.n(l),d=a(1762),c=a(7182),x=a(7244),m=a(8377),h=a(4195),g=a(6374);let o=()=>{let e=(0,n.useRouter)(),{isAuthenticated:r,isLoading:a}=(0,c.A)(),{characters:l,gameSessions:o,loadingCharacters:b,loadingSession:u,error:p,fetchCharacters:y,fetchGameSessions:j,startNewGame:v}=(0,d.I)(),[N,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!a&&!r)return void e.push("/auth/login");y(),j()},[a,r,y,j,e]);let k=async r=>{try{f(!0);let a=await v(r);e.push("/game/".concat(a.id))}catch(e){console.error("Failed to start game:",e)}finally{f(!1)}},w=r=>{e.push("/game/".concat(r))};return a||b&&0===l.length?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-900 text-white",children:(0,t.jsx)(g.A,{size:"large",message:"Đang tải..."})}):r?(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Nhập Vai A.I Simulator"}),p&&(0,t.jsx)("div",{className:"bg-red-500 text-white p-4 rounded-md mb-6",children:p}),o.length>0&&(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Phi\xean chơi đang hoạt động"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>{let r=l.find(r=>r.id===e.characterId);return r?(0,t.jsxs)(h.A,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>w(e.id),footer:(0,t.jsx)(m.A,{variant:"primary",isFullWidth:!0,onClick:r=>{r.stopPropagation(),w(e.id)},children:"Tiếp tục chơi"}),children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-3",children:r.name}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Cấp độ ",r.level," • ",r.primaryGenre]})}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[(0,t.jsxs)("p",{children:["Bắt đầu: ",new Date(e.startedAt).toLocaleDateString()]}),(0,t.jsxs)("p",{children:["Lần chơi gần nhất: ",new Date(e.updatedAt).toLocaleString()]})]})]},e.id):null})})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Nh\xe2n vật của bạn"}),(0,t.jsx)(i(),{href:"/game/characters/create",children:(0,t.jsx)(m.A,{variant:"success",leftIcon:(0,t.jsx)("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),children:"Tạo nh\xe2n vật mới"})})]}),b?(0,t.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,t.jsx)(g.A,{message:"Đang tải danh s\xe1ch nh\xe2n vật..."})}):0===l.length?(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,t.jsx)("p",{className:"text-xl mb-4",children:"Bạn chưa c\xf3 nh\xe2n vật n\xe0o"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:"H\xe3y tạo nh\xe2n vật đầu ti\xean của bạn để bắt đầu cuộc phi\xeau lưu!"}),(0,t.jsx)(i(),{href:"/game/characters/create",children:(0,t.jsx)(m.A,{variant:"success",children:"Tạo nh\xe2n vật"})})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.slice(0,3).map(e=>(0,t.jsx)("div",{className:"flex flex-col h-full",children:(0,t.jsx)(x.A,{character:e,onStartGame:()=>k(e.id)})},e.id)),l.length>3&&(0,t.jsx)(i(),{href:"/game/characters",className:"col-span-full text-center mt-4",children:(0,t.jsxs)(m.A,{variant:"secondary",children:["Xem tất cả nh\xe2n vật (",l.length,")"]})})]})]}),(0,t.jsxs)(h.A,{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Links nhanh"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(i(),{href:"/game/characters",className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-4 rounded-md transition duration-300 text-center",children:"Quản l\xfd nh\xe2n vật"}),(0,t.jsx)(i(),{href:"/dashboard",className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-4 rounded-md transition duration-300 text-center",children:"Bảng điều khiển"}),(0,t.jsx)(i(),{href:"/",className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-4 rounded-md transition duration-300 text-center",children:"Trang chủ"})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Đăng nhập để tiếp tục"}),(0,t.jsx)("p",{className:"mb-6",children:"Bạn cần đăng nhập để truy cập game."}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(i(),{href:"/auth/login",className:"bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-md transition duration-300",children:"Đăng nhập"})})]})})}},5695:(e,r,a)=>{"use strict";var t=a(8999);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},5958:(e,r,a)=>{Promise.resolve().then(a.bind(a,4595))},6374:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(5155);a(2115);let s=e=>{let{size:r="medium",message:a="Đang tải..."}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,t.jsx)("div",{className:"".concat({small:"w-5 h-5",medium:"w-8 h-8",large:"w-12 h-12"}[r]," animate-spin rounded-full border-b-2 border-primary")}),a&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a})]})}},7244:(e,r,a)=>{"use strict";a.d(r,{A:()=>d});var t=a(5155);a(2115);var s=a(5327),n=a(4195),l=a(8377);let i={[s._R.FANTASY]:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",[s._R.MODERN]:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",[s._R.SCIFI]:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",[s._R.XIANXIA]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",[s._R.WUXIA]:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",[s._R.HORROR]:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",[s._R.CYBERPUNK]:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",[s._R.STEAMPUNK]:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",[s._R.POSTAPOCALYPTIC]:"bg-lime-100 text-lime-800 dark:bg-lime-900 dark:text-lime-200",[s._R.HISTORICAL]:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},d=e=>{var r;let{character:a,onSelect:s,onStartGame:d,isSelected:c=!1}=e,x=e=>{let r=i[e]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(r," mr-2 mb-2"),children:e},e)};return(0,t.jsx)(n.A,{className:"h-full transition-all ".concat(c?"ring-2 ring-blue-500 dark:ring-blue-400":""),footer:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Lv. ",a.level," • XP: ",a.experience]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[s&&(0,t.jsx)(l.A,{variant:"secondary",size:"sm",onClick:s,children:c?"Đ\xe3 chọn":"Chọn"}),d&&(0,t.jsx)(l.A,{variant:"primary",size:"sm",onClick:d,children:"Bắt đầu"})]})]}),children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("h4",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:a.name}),(0,t.jsxs)("div",{className:"mb-4",children:[x(a.primaryGenre),null==(r=a.secondaryGenres)?void 0:r.map(e=>x(e))]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4 flex-grow",children:a.description}),a.traits&&a.traits.length>0&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Đặc điểm:"}),(0,t.jsx)("div",{className:"flex flex-wrap",children:a.traits.map((e,r)=>(0,t.jsx)("span",{className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 px-2 py-1 rounded text-xs mr-2 mb-1",children:e},r))})]}),a.abilities&&a.abilities.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Kỹ năng:"}),(0,t.jsx)("div",{className:"flex flex-wrap",children:a.abilities.map((e,r)=>(0,t.jsx)("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded text-xs mr-2 mb-1",children:e},r))})]})]})})}},8377:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(5155);a(2115);let s=e=>{let{children:r,variant:a="primary",size:s="md",isLoading:n=!1,isFullWidth:l=!1,leftIcon:i,rightIcon:d,className:c="",disabled:x,...m}=e;return(0,t.jsx)("button",{disabled:x||n,className:"\n        ".concat({primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-500 hover:bg-gray-600 text-white",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",warning:"bg-yellow-500 hover:bg-yellow-600 text-white",info:"bg-cyan-500 hover:bg-cyan-600 text-white"}[a]," \n        ").concat({sm:"py-1 px-2 text-sm",md:"py-2 px-4 text-base",lg:"py-2.5 px-5 text-lg"}[s]," \n        ").concat(l?"w-full":""," \n        rounded-md font-medium transition duration-150 ease-in-out \n        focus:outline-none focus:ring-2 focus:ring-opacity-50 focus:ring-blue-500\n        disabled:opacity-60 disabled:cursor-not-allowed\n        ").concat(c,"\n      "),...m,children:n?(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{children:"Đang xử l\xfd..."})]}):(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[i&&(0,t.jsx)("span",{className:"mr-2",children:i}),r,d&&(0,t.jsx)("span",{className:"ml-2",children:d})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[464,874,364,441,684,358],()=>r(5958)),_N_E=e.O()}]);