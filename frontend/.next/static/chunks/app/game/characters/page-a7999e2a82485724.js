(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{3260:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var r=a(5155),t=a(2115),l=a(5695),n=a(6874),i=a.n(n),d=a(1762),c=a(7182),x=a(7244),m=a(8377),h=a(6374),g=a(4195);let o=()=>{let e=(0,l.useRouter)(),{isAuthenticated:s,isLoading:a}=(0,c.A)(),{characters:n,loadingCharacters:o,error:b,fetchCharacters:u,selectedCharacter:p,setSelectedCharacter:y,startNewGame:j}=(0,d.I)(),[v,N]=(0,t.useState)(!1),[f,k]=(0,t.useState)(!1),[w,A]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(!a&&!s)return void e.push("/auth/login");u()},[a,s,u,e]);let R=e=>{y(e)},C=async s=>{try{N(!0);let a=await j(s);e.push("/game/".concat(a.id))}catch(e){console.error("Failed to start game:",e)}finally{N(!1)}},_=e=>{A(e),k(!0)},S=()=>{k(!1),A(null)};return a?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-900 text-white",children:(0,r.jsx)(h.A,{size:"large",message:"Đang tải..."})}):s?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Nh\xe2n vật của bạn"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(i(),{href:"/game/characters/create",children:(0,r.jsx)(m.A,{variant:"success",leftIcon:(0,r.jsx)("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),children:"Tạo nh\xe2n vật mới"})}),(0,r.jsx)(i(),{href:"/game",children:(0,r.jsx)(m.A,{variant:"primary",children:"Quay lại game"})})]})]}),b&&(0,r.jsx)("div",{className:"bg-red-500 text-white p-4 rounded-md mb-6",children:b}),o?(0,r.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,r.jsx)(h.A,{message:"Đang tải danh s\xe1ch nh\xe2n vật..."})}):0===n.length?(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,r.jsx)("p",{className:"text-xl mb-4",children:"Bạn chưa c\xf3 nh\xe2n vật n\xe0o"}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",children:"H\xe3y tạo nh\xe2n vật đầu ti\xean của bạn để bắt đầu cuộc phi\xeau lưu!"}),(0,r.jsx)(i(),{href:"/game/characters/create",children:(0,r.jsx)(m.A,{variant:"success",children:"Tạo nh\xe2n vật"})})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>(0,r.jsx)("div",{className:"flex flex-col h-full",children:(0,r.jsx)(x.A,{character:e,isSelected:(null==p?void 0:p.id)===e.id,onSelect:()=>{R(e),_(e)},onStartGame:()=>C(e.id)})},e.id))})]}),f&&w&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,r.jsx)(g.A,{className:"max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:w.name}),(0,r.jsx)("button",{onClick:S,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white transition duration-300",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Th\xf4ng tin cơ bản"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"T\xean:"})," ",w.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Cấp độ:"})," ",w.level]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Kinh nghiệm:"})," ",w.experience," XP"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Thể loại ch\xednh:"})," ",w.primaryGenre]}),w.secondaryGenres&&w.secondaryGenres.length>0&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Thể loại phụ:"})," ",w.secondaryGenres.join(", ")]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Ng\xe0y tạo:"})," ",new Date(w.createdAt).toLocaleDateString()]})]})]})]}),w.description&&(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"M\xf4 tả"}),(0,r.jsx)("p",{children:w.description})]}),w.backstory&&(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Tiểu sử"}),(0,r.jsx)("p",{children:w.backstory})]}),w.traits&&w.traits.length>0&&(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Đặc điểm"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:w.traits.map((e,s)=>(0,r.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded text-sm",children:e},s))})]}),w.abilities&&w.abilities.length>0&&(0,r.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Kỹ năng"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:w.abilities.map((e,s)=>(0,r.jsx)("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded text-sm",children:e},s))})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,r.jsx)(m.A,{variant:"primary",onClick:()=>{S(),C(w.id)},isLoading:v,children:"Bắt đầu phi\xeau lưu"}),(0,r.jsx)(m.A,{variant:"secondary",onClick:S,children:"Đ\xf3ng"})]})]})]})})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Đăng nhập để tiếp tục"}),(0,r.jsx)("p",{className:"mb-6",children:"Bạn cần đăng nhập để xem danh s\xe1ch nh\xe2n vật."}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(i(),{href:"/auth/login",className:"bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-md transition duration-300",children:"Đăng nhập"})})]})})}},4195:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(5155);a(2115);let t=e=>{let{title:s,children:a,className:t="",footer:l}=e;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden ".concat(t),children:[s&&(0,r.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:s})}),(0,r.jsx)("div",{className:"px-4 py-4",children:a}),l&&(0,r.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-3",children:l})]})}},5312:(e,s,a)=>{Promise.resolve().then(a.bind(a,3260))},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},6374:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(5155);a(2115);let t=e=>{let{size:s="medium",message:a="Đang tải..."}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,r.jsx)("div",{className:"".concat({small:"w-5 h-5",medium:"w-8 h-8",large:"w-12 h-12"}[s]," animate-spin rounded-full border-b-2 border-primary")}),a&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a})]})}},7244:(e,s,a)=>{"use strict";a.d(s,{A:()=>d});var r=a(5155);a(2115);var t=a(5327),l=a(4195),n=a(8377);let i={[t._R.FANTASY]:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",[t._R.MODERN]:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",[t._R.SCIFI]:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",[t._R.XIANXIA]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",[t._R.WUXIA]:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",[t._R.HORROR]:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",[t._R.CYBERPUNK]:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",[t._R.STEAMPUNK]:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",[t._R.POSTAPOCALYPTIC]:"bg-lime-100 text-lime-800 dark:bg-lime-900 dark:text-lime-200",[t._R.HISTORICAL]:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},d=e=>{var s;let{character:a,onSelect:t,onStartGame:d,isSelected:c=!1}=e,x=e=>{let s=i[e]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(s," mr-2 mb-2"),children:e},e)};return(0,r.jsx)(l.A,{className:"h-full transition-all ".concat(c?"ring-2 ring-blue-500 dark:ring-blue-400":""),footer:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Lv. ",a.level," • XP: ",a.experience]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[t&&(0,r.jsx)(n.A,{variant:"secondary",size:"sm",onClick:t,children:c?"Đ\xe3 chọn":"Chọn"}),d&&(0,r.jsx)(n.A,{variant:"primary",size:"sm",onClick:d,children:"Bắt đầu"})]})]}),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("h4",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:a.name}),(0,r.jsxs)("div",{className:"mb-4",children:[x(a.primaryGenre),null==(s=a.secondaryGenres)?void 0:s.map(e=>x(e))]}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4 flex-grow",children:a.description}),a.traits&&a.traits.length>0&&(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Đặc điểm:"}),(0,r.jsx)("div",{className:"flex flex-wrap",children:a.traits.map((e,s)=>(0,r.jsx)("span",{className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 px-2 py-1 rounded text-xs mr-2 mb-1",children:e},s))})]}),a.abilities&&a.abilities.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Kỹ năng:"}),(0,r.jsx)("div",{className:"flex flex-wrap",children:a.abilities.map((e,s)=>(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded text-xs mr-2 mb-1",children:e},s))})]})]})})}},8377:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(5155);a(2115);let t=e=>{let{children:s,variant:a="primary",size:t="md",isLoading:l=!1,isFullWidth:n=!1,leftIcon:i,rightIcon:d,className:c="",disabled:x,...m}=e;return(0,r.jsx)("button",{disabled:x||l,className:"\n        ".concat({primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-500 hover:bg-gray-600 text-white",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",warning:"bg-yellow-500 hover:bg-yellow-600 text-white",info:"bg-cyan-500 hover:bg-cyan-600 text-white"}[a]," \n        ").concat({sm:"py-1 px-2 text-sm",md:"py-2 px-4 text-base",lg:"py-2.5 px-5 text-lg"}[t]," \n        ").concat(n?"w-full":""," \n        rounded-md font-medium transition duration-150 ease-in-out \n        focus:outline-none focus:ring-2 focus:ring-opacity-50 focus:ring-blue-500\n        disabled:opacity-60 disabled:cursor-not-allowed\n        ").concat(c,"\n      "),...m,children:l?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Đang xử l\xfd..."})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[i&&(0,r.jsx)("span",{className:"mr-2",children:i}),s,d&&(0,r.jsx)("span",{className:"ml-2",children:d})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[464,874,364,441,684,358],()=>s(5312)),_N_E=e.O()}]);