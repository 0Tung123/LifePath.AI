(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[847],{3814:(e,n,t)=>{Promise.resolve().then(t.bind(t,8581))},8581:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>m});var i=t(5155),s=t(2115),a=t(5695),r=t(3464),l=t(6874),c=t.n(l);let h=[{id:"fantasy",name:"Fantasy",description:"Thế giới với ph\xe9p thuật, hiệp sĩ, rồng v\xe0 sinh vật huyền b\xed"},{id:"modern",name:"Modern",description:"Thế giới hiện đại với c\xf4ng nghệ v\xe0 x\xe3 hội như thực tế"},{id:"scifi",name:"Sci-Fi",description:"Thế giới tương lai với c\xf4ng nghệ ti\xean tiến, du h\xe0nh vũ trụ"},{id:"xianxia",name:"Ti\xean Hiệp",description:"Thế giới tu ti\xean, trau dồi linh kh\xed, thăng cấp cảnh giới"},{id:"wuxia",name:"V\xf5 Hiệp",description:"Thế giới v\xf5 thuật, giang hồ, kiếm hiệp"},{id:"horror",name:"Horror",description:"Thế giới đầy rẫy những sinh vật kinh dị, ma quỷ v\xe0 sự sợ h\xe3i"},{id:"cyberpunk",name:"Cyberpunk",description:"Thế giới tương lai đen tối với c\xf4ng nghệ cao, tập đo\xe0n lớn v\xe0 cấy gh\xe9p cơ thể"},{id:"steampunk",name:"Steampunk",description:"Thế giới thay thế với c\xf4ng nghệ hơi nước ti\xean tiến, thường c\xf3 bối cảnh thời Victoria"},{id:"postapocalyptic",name:"Post-Apocalyptic",description:"Thế giới sau thảm họa to\xe0n cầu, con người phải sinh tồn"},{id:"historical",name:"Historical",description:"Thế giới dựa tr\xean c\xe1c giai đoạn lịch sử thực tế"}],o={fantasy:["Chiến binh","Ph\xe1p sư","Cung thủ","Đạo tặc","Gi\xe1o sĩ","Hiệp sĩ","Thuật sĩ"],modern:["Th\xe1m tử","B\xe1c sĩ","Cảnh s\xe1t","Hacker","Nh\xe0 khoa học","Vận động vi\xean","Nghệ sĩ"],scifi:["Phi h\xe0nh gia","Kỹ sư robot","L\xednh đ\xe1nh thu\xea","Nh\xe0 khoa học","Thợ săn tiền thưởng","Phi c\xf4ng","Hacker"],xianxia:["Kiếm tu","Đan tu","Ph\xf9 tu","Thể tu","Linh tu","T\xe2m tu","V\xf5 tu"],wuxia:["Kiếm kh\xe1ch","V\xf5 sư","Th\xedch kh\xe1ch","Hiệp kh\xe1ch","Thần y","Độc sư","Ti\xeau sư"],horror:["Thợ săn quỷ","Nh\xe0 ngoại cảm","Nh\xe0 khoa học","Người sống s\xf3t","Linh mục trừ t\xe0","Th\xe1m tử si\xeau nhi\xean","Ph\xe1p sư"],cyberpunk:["Netrunner","L\xednh đ\xe1nh thu\xea","Kỹ sư cấy gh\xe9p","S\xe1t thủ","Hacker","Cảnh s\xe1t","B\xe1c sĩ chợ đen"],steampunk:["Nh\xe0 ph\xe1t minh","Phi c\xf4ng","Th\xe1m tử","Qu\xfd tộc","Cơ kh\xed sư","Nh\xe0 th\xe1m hiểm","Thủy thủ"],postapocalyptic:["Người sống s\xf3t","Chiến binh","Thợ săn","Thầy thuốc","Kỹ sư","Thủ lĩnh","Trinh s\xe1t"],historical:["Hiệp sĩ","Thương nh\xe2n","Học giả","Th\xe1m tử","Qu\xfd tộc","Thủy thủ","Thợ săn"]};function d(){let e=(0,a.useRouter)(),n=(0,a.useSearchParams)().get("genre"),[t,l]=(0,s.useState)(1),[d,m]=(0,s.useState)(!1),[g,u]=(0,s.useState)(""),[x,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)({name:"",characterClass:"",primaryGenre:n||"fantasy",secondaryGenres:[],customGenreDescription:"",backstory:"",attributes:{strength:10,intelligence:10,dexterity:10,charisma:10,health:100,mana:100},skills:[]}),[v,N]=(0,s.useState)(""),j=e=>{let{name:n,value:t}=e.target;if(n.includes(".")){let[e,i]=n.split(".");y({...b,[e]:{...b[e],[i]:t}})}else y({...b,[n]:t})},f=e=>{let n=[...b.secondaryGenres];if(n.includes(e)){let t=n.filter(n=>n!==e);y({...b,secondaryGenres:t})}else n.length<2&&y({...b,secondaryGenres:[...n,e]})},k=(e,n)=>{y({...b,attributes:{...b.attributes,[e]:parseInt(n)}})},w=e=>{let n=[...b.skills];if(n.includes(e)){let t=n.filter(n=>n!==e);y({...b,skills:t})}else y({...b,skills:[...n,e]})},T=async()=>{if(!v.trim())return void u("Vui l\xf2ng nhập m\xf4 tả cho nh\xe2n vật");try{m(!0),u("");let e=await r.A.post("/api/game/characters/generate",{description:v,primaryGenre:b.primaryGenre,secondaryGenres:b.secondaryGenres,customGenreDescription:b.customGenreDescription});y(e.data),l(4),m(!1)}catch(e){console.error("Error generating character:",e),u("Kh\xf4ng thể tạo nh\xe2n vật. Vui l\xf2ng thử lại sau."),m(!1)}},C=async()=>{if(!b.name.trim())return void u("Vui l\xf2ng nhập t\xean nh\xe2n vật");if(!b.characterClass.trim())return void u("Vui l\xf2ng chọn lớp nh\xe2n vật");try{m(!0),u("");let n=await r.A.post("/api/game/characters",b);e.push("/game/characters/".concat(n.data.id))}catch(e){console.error("Error creating character:",e),u("Kh\xf4ng thể tạo nh\xe2n vật. Vui l\xf2ng thử lại sau."),m(!1)}},G=e=>{let n={fantasy:["Kiếm thuật","Ph\xe9p thuật","Cung thuật","Đ\xe1nh cận chiến","Ẩn nấp","Sinh tồn","Thuốc","Khảo cổ","Lịch sử cổ đại","Nhận biết ma thuật"],modern:["L\xe1i xe","Sơ cứu","C\xf4ng nghệ","Thuyết phục","Điều tra","Thể thao","Nấu ăn","Nghệ thuật","Ng\xf4n ngữ","Kinh doanh"],scifi:["Lập tr\xecnh","Sửa chữa robot","L\xe1i t\xe0u vũ trụ","Kiến thức ngo\xe0i h\xe0nh tinh","Vũ kh\xed năng lượng","Sinh học kh\xf4ng gian","Vật l\xfd lượng tử","Sinh tồn kh\xf4ng gian","Chiến thuật","Hack hệ thống"],xianxia:["Kiếm đạo","Luyện đan","Tu luyện","Ph\xf9 văn","Thi\xean nh\xe3n","Thần thức","Kiếm \xfd","Ngộ t\xednh","Đạo t\xe2m","Linh thức"],wuxia:["Kiếm ph\xe1p","Quyền ph\xe1p","Khinh c\xf4ng","Nội c\xf4ng","Điểm huyệt","Y thuật","Độc thuật","\xc1m kh\xed","V\xf5 học","Thi\xean văn địa l\xfd"],horror:["Trừ t\xe0","Kiến thức huyền b\xed","Điều tra","Sinh tồn","T\xe2m l\xfd học","Sơ cứu","Lịch sử huyền b\xed","Vũ kh\xed","Nhận biết si\xeau nhi\xean","Nghi thức cổ đại"],cyberpunk:["Hack","Cấy gh\xe9p","Vũ kh\xed","Điện tử","L\xe1i xe","Thị trường đen","Kiến thức đường phố","Sơ cứu","Thương lượng","Giả mạo"],steampunk:["Cơ kh\xed","Ph\xe1t minh","L\xe1i m\xe1y bay","H\xf3a học","X\xe3 giao","Lịch sử","Điều tra","Vũ kh\xed","Thi\xean văn học","H\xe0ng hải"],postapocalyptic:["Sinh tồn","Săn bắn","Sơ cứu","Sửa chữa","Nấu ăn d\xe3 chiến","T\xecm kiếm","Chiến đấu","N\xf4ng nghiệp","Đ\xe0m ph\xe1n","Định hướng"],historical:["Kiếm thuật","Cưỡi ngựa","X\xe3 giao","Lịch sử","Ng\xf4n ngữ cổ","H\xe0ng hải","Chiến thuật","Y học cổ truyền","Thương mại","Nghệ thuật"]};return n[e]||n.fantasy};return(0,i.jsx)("div",{className:"min-h-screen bg-gray-900 text-white py-12 px-4",children:(()=>{switch(t){case 1:return(0,i.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 shadow-lg max-w-2xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Chọn Phương Thức Tạo Nh\xe2n Vật"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[(0,i.jsxs)("button",{onClick:()=>{p(!1),l(2)},className:"bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 text-white p-6 rounded-xl transition-all transform hover:scale-105 flex flex-col items-center text-center",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,i.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Tạo Thủ C\xf4ng"}),(0,i.jsx)("p",{className:"text-sm text-gray-300",children:"Tự thiết kế nh\xe2n vật của bạn với đầy đủ t\xf9y chỉnh"})]}),(0,i.jsxs)("button",{onClick:()=>{p(!0),l(2)},className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white p-6 rounded-xl transition-all transform hover:scale-105 flex flex-col items-center text-center",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(0,i.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Tạo Bằng AI"}),(0,i.jsx)("p",{className:"text-sm text-gray-300",children:"M\xf4 tả nh\xe2n vật bạn muốn v\xe0 để AI tạo ra nh\xe2n vật ho\xe0n chỉnh"})]})]}),(0,i.jsx)("div",{className:"mt-8 text-center",children:(0,i.jsx)(c(),{href:"/game",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Quay lại trang chủ"})})]});case 2:return(0,i.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 shadow-lg max-w-4xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Chọn Thể Loại"}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Thể loại ch\xednh"}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:h.map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>y({...b,primaryGenre:e.id}),className:"p-3 rounded-lg text-center transition-colors ".concat(b.primaryGenre===e.id?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.name},e.id))})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Thể loại phụ (tối đa 2)"}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:h.filter(e=>e.id!==b.primaryGenre).map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>f(e.id),className:"p-3 rounded-lg text-center transition-colors ".concat(b.secondaryGenres.includes(e.id)?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"," ").concat(b.secondaryGenres.length>=2&&!b.secondaryGenres.includes(e.id)?"opacity-50 cursor-not-allowed":""),disabled:b.secondaryGenres.length>=2&&!b.secondaryGenres.includes(e.id),children:e.name},e.id))})]}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"M\xf4 tả thể loại t\xf9y chỉnh (t\xf9y chọn)"}),(0,i.jsx)("textarea",{name:"customGenreDescription",value:b.customGenreDescription,onChange:j,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"M\xf4 tả th\xeam về thế giới v\xe0 bối cảnh bạn muốn..."})]}),(0,i.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,i.jsx)("button",{onClick:()=>l(1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md transition-colors",children:"Quay lại"}),(0,i.jsx)("button",{onClick:()=>l(x?3:4),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Tiếp tục"})]})]});case 3:return(0,i.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 shadow-lg max-w-3xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Tạo Nh\xe2n Vật Bằng AI"}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"M\xf4 tả nh\xe2n vật của bạn"}),(0,i.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),className:"w-full bg-gray-700 text-white rounded-lg p-4 focus:outline-none focus:ring-2 focus:ring-purple-500",rows:6,placeholder:"M\xf4 tả chi tiết về nh\xe2n vật bạn muốn tạo. V\xed dụ: Một chiến binh trẻ với khả năng đặc biệt, xuất th\xe2n từ một ng\xf4i l\xe0ng nhỏ, c\xf3 ước mơ trở th\xe0nh hiệp sĩ vĩ đại..."}),(0,i.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"M\xf4 tả c\xe0ng chi tiết, nh\xe2n vật được tạo ra c\xe0ng ph\xf9 hợp với mong muốn của bạn."})]}),g&&(0,i.jsx)("div",{className:"mb-6 p-3 bg-red-900/50 text-red-200 rounded-lg",children:g}),(0,i.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,i.jsx)("button",{onClick:()=>l(2),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md transition-colors",disabled:d,children:"Quay lại"}),(0,i.jsx)("button",{onClick:T,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-md transition-colors flex items-center ".concat(d?"opacity-70 cursor-wait":""),disabled:d,children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tạo..."]}):"Tạo nh\xe2n vật"})]})]});case 4:var e;return(0,i.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 shadow-lg max-w-4xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:x?"Xem Trước Nh\xe2n Vật":"Tạo Nh\xe2n Vật"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"T\xean nh\xe2n vật"}),(0,i.jsx)("input",{type:"text",name:"name",value:b.name,onChange:j,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập t\xean nh\xe2n vật",disabled:x&&d})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Lớp nh\xe2n vật"}),(0,i.jsxs)("select",{name:"characterClass",value:b.characterClass,onChange:j,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x&&d,children:[(0,i.jsx)("option",{value:"",children:"Chọn lớp nh\xe2n vật"}),null==(e=o[b.primaryGenre])?void 0:e.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Tiểu sử"}),(0,i.jsx)("textarea",{name:"backstory",value:b.backstory,onChange:j,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:5,placeholder:"M\xf4 tả về qu\xe1 khứ v\xe0 lai lịch của nh\xe2n vật...",disabled:x&&d})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Thuộc t\xednh"}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(b.attributes).map(e=>{let[n,t]=e;return(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"block text-gray-400 text-sm mb-1 capitalize",children:"strength"===n?"Sức mạnh":"intelligence"===n?"Tr\xed tuệ":"dexterity"===n?"Nhanh nhẹn":"charisma"===n?"Quyến rũ":"health"===n?"Sinh lực":"mana"===n?"Năng lượng":n}),(0,i.jsx)("input",{type:"range",min:"health"===n||"mana"===n?50:5,max:"health"===n||"mana"===n?200:20,value:t,onChange:e=>k(n,e.target.value),className:"w-full",disabled:x&&d}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-400",children:[(0,i.jsx)("span",{children:t}),(0,i.jsx)("span",{children:"health"===n||"mana"===n?200:20})]})]},n)})})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-300 mb-2",children:"Kỹ năng (chọn tối đa 5)"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:G(b.primaryGenre).map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>w(e),className:"px-3 py-1 rounded-full text-sm transition-colors ".concat(b.skills.includes(e)?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"," ").concat(b.skills.length>=5&&!b.skills.includes(e)?"opacity-50 cursor-not-allowed":""),disabled:b.skills.length>=5&&!b.skills.includes(e)||x&&d,children:e},e))})]})]})]}),g&&(0,i.jsx)("div",{className:"mb-6 p-3 bg-red-900/50 text-red-200 rounded-lg",children:g}),(0,i.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,i.jsx)("button",{onClick:()=>l(x?3:2),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md transition-colors",disabled:d,children:"Quay lại"}),(0,i.jsx)("button",{onClick:C,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 rounded-md transition-colors flex items-center ".concat(d?"opacity-70 cursor-wait":""),disabled:d,children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang lưu..."]}):"Tạo nh\xe2n vật"})]})]});default:return null}})()})}function m(){return(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-pulse text-2xl font-bold mb-4",children:"Đang tải..."}),(0,i.jsx)("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto"})]})}),children:(0,i.jsx)(d,{})})}}},e=>{var n=n=>e(e.s=n);e.O(0,[493,794,441,684,358],()=>n(3814)),_N_E=e.O()}]);