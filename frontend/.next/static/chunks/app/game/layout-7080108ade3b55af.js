(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{2302:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=t(3464).A.create({baseURL:"http://localhost:3001",withCredentials:!0,headers:{"Content-Type":"application/json"}})},5619:(e,s,t)=>{Promise.resolve().then(t.bind(t,6792))},6792:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(5155),r=t(2115),l=t(5695),i=t(6874),c=t.n(i),n=t(6766),h=t(2302);function o(e){let{children:s}=e,t=(0,l.useRouter)(),i=(0,l.usePathname)(),[o,d]=(0,r.useState)(null),[x,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=await h.A.get("/auth/status");e.data.isAuthenticated?d(e.data.user):t.push("/login?redirect="+encodeURIComponent(i))}catch(e){console.error("Auth check error:",e),t.push("/login?redirect="+encodeURIComponent(i))}finally{m(!1)}})()},[t,i]);let u=i.includes("/game/play/");return x?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-pulse text-2xl font-bold mb-4",children:"Đang tải..."}),(0,a.jsx)("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto"})]})}):u?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[(0,a.jsx)("header",{className:"bg-gray-800 border-b border-gray-700",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,a.jsx)(c(),{href:"/game",className:"text-2xl font-bold",children:"Thế Giới Phi\xeau Lưu"}),(0,a.jsxs)("nav",{className:"hidden md:flex space-x-6",children:[(0,a.jsx)(c(),{href:"/game",className:"transition-colors ".concat("/game"===i?"text-blue-400":"text-gray-300 hover:text-white"),children:"Trang Chủ"}),(0,a.jsx)(c(),{href:"/game/characters",className:"transition-colors ".concat(i.includes("/game/characters")?"text-blue-400":"text-gray-300 hover:text-white"),children:"Nh\xe2n Vật"}),(0,a.jsx)(c(),{href:"/game/sessions",className:"transition-colors ".concat(i.includes("/game/sessions")?"text-blue-400":"text-gray-300 hover:text-white"),children:"Phi\xean Game"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:o&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"hidden md:block mr-4",children:[(0,a.jsx)("div",{className:"font-medium",children:o.firstName&&o.lastName?"".concat(o.firstName," ").concat(o.lastName):o.firstName||o.lastName||"Người chơi"}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:o.email})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center",children:o.profilePicture?(0,a.jsx)(n.default,{src:o.profilePicture,alt:"Avatar",width:40,height:40,className:"w-full h-full rounded-full"}):(0,a.jsx)("span",{className:"text-lg font-bold",children:(o.firstName||o.lastName||"U").charAt(0).toUpperCase()})}),(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg overflow-hidden z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300",children:(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsx)(c(),{href:"/dashboard",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Trang C\xe1 Nh\xe2n"}),(0,a.jsx)(c(),{href:"/game/characters",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Nh\xe2n Vật Của T\xf4i"}),(0,a.jsx)(c(),{href:"/game/sessions",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white",children:"Phi\xean Game"}),(0,a.jsx)("hr",{className:"border-gray-700 my-1"}),(0,a.jsx)("button",{onClick:async()=>{try{await h.A.post("/auth/logout"),t.push("/")}catch(e){console.error("Logout error:",e)}},className:"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300",children:"Đăng Xuất"})]})})]})]})})]})})}),(0,a.jsx)("main",{className:"flex-1",children:s}),(0,a.jsx)("footer",{className:"bg-gray-800 border-t border-gray-700 py-6",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,a.jsx)("div",{className:"text-lg font-bold mb-1",children:"Thế Giới Phi\xeau Lưu"}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"\xa9 2024 Tất cả quyền được bảo lưu"})]}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsx)(c(),{href:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Trang Chủ"}),(0,a.jsx)(c(),{href:"/game",className:"text-gray-400 hover:text-white transition-colors",children:"Game"}),(0,a.jsx)(c(),{href:"/dashboard",className:"text-gray-400 hover:text-white transition-colors",children:"Trang C\xe1 Nh\xe2n"})]})]})})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[493,794,766,441,684,358],()=>s(5619)),_N_E=e.O()}]);