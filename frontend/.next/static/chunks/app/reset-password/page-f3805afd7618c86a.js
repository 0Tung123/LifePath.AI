(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{4622:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),l=t(2115),n=t(5695),a=t(6874),i=t.n(a),c=t(3464);function o(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)().get("token"),[t,a]=(0,l.useState)({password:"",confirmPassword:""}),[o,d]=(0,l.useState)(!1),[h,m]=(0,l.useState)(""),u=e=>{let{name:s,value:r}=e.target;a({...t,[s]:r})},x=async r=>{if(r.preventDefault(),!s)return void m("Token kh\xf4ng hợp lệ hoặc đ\xe3 hết hạn");if(t.password!==t.confirmPassword)return void m("Mật khẩu x\xe1c nhận kh\xf4ng khớp");try{d(!0),m(""),await c.A.post("/api/auth/reset-password",{token:s,password:t.password}),e.push("/login?reset=success")}catch(e){var l,n;console.error("Reset password error:",e),m((null==(n=e.response)||null==(l=n.data)?void 0:l.message)||"Kh\xf4ng thể đặt lại mật khẩu. Vui l\xf2ng thử lại."),d(!1)}};return s?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full",children:[(0,r.jsx)("div",{className:"bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Đặt lại mật khẩu"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Tạo mật khẩu mới cho t\xe0i khoản của bạn"})]}),h&&(0,r.jsx)("div",{className:"mb-6 p-3 bg-red-900/50 text-red-200 rounded-lg",children:h}),(0,r.jsxs)("form",{onSubmit:x,children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-gray-300 mb-2",children:"Mật khẩu mới"}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:u,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập mật khẩu mới",minLength:6,required:!0})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-gray-300 mb-2",children:"X\xe1c nhận mật khẩu"}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:u,className:"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nhập lại mật khẩu mới",minLength:6,required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"w-full py-3 rounded-lg text-white font-bold transition-colors ".concat(o?"bg-blue-700 cursor-wait":"bg-blue-600 hover:bg-blue-700"),children:o?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang xử l\xfd..."]}):"Đặt lại mật khẩu"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)("p",{className:"text-gray-400",children:(0,r.jsx)(i(),{href:"/login",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Quay lại đăng nhập"})})})]})}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)(i(),{href:"/",className:"text-gray-400 hover:text-white transition-colors",children:"← Quay lại trang chủ"})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Li\xean kết kh\xf4ng hợp lệ"}),(0,r.jsx)("p",{className:"text-gray-400 mb-8",children:"Li\xean kết đặt lại mật khẩu kh\xf4ng hợp lệ hoặc đ\xe3 hết hạn. Vui l\xf2ng y\xeau cầu một li\xean kết mới."}),(0,r.jsx)(i(),{href:"/forgot-password",className:"block w-full py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors font-bold",children:"Y\xeau cầu li\xean kết mới"})]})})}function d(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-pulse text-2xl font-bold mb-4",children:"Đang tải..."}),(0,r.jsx)("div",{className:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto"})]})}),children:(0,r.jsx)(o,{})})}},6787:(e,s,t)=>{Promise.resolve().then(t.bind(t,4622))}},e=>{var s=s=>e(e.s=s);e.O(0,[493,794,441,684,358],()=>s(6787)),_N_E=e.O()}]);