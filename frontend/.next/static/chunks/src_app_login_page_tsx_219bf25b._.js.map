{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/my-fullstack-app/frontend/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, Suspense } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\nfunction LoginForm() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const redirect = searchParams.get(\"redirect\") || \"/game\";\n  const { isAuthenticated, loading: authLoading, checkAuth } = useAuth();\n\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      router.push(redirect);\n    }\n  }, [isAuthenticated, router, redirect]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      setError(\"\");\n\n      await axios.post(\"/api/auth/login\", formData);\n\n      // Refresh auth status after successful login\n      await checkAuth();\n\n      // Redirect will happen automatically via useEffect when isAuthenticated becomes true\n    } catch (err: unknown) {\n      const error = err as { response?: { data?: { message?: string } } };\n      console.error(\"Login error:\", err);\n      setError(\n        error.response?.data?.message || \"Đăng nhập thất bại. Vui lòng thử lại.\"\n      );\n      setLoading(false);\n    }\n  };\n\n  if (authLoading || isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-pulse text-2xl font-bold mb-4\">\n            {isAuthenticated ? \"Đang chuyển hướng...\" : \"Đang kiểm tra...\"}\n          </div>\n          <div className=\"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-900 to-blue-900 text-white flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full\">\n        <div className=\"bg-gray-800 rounded-xl shadow-lg overflow-hidden\">\n          <div className=\"p-8\">\n            <div className=\"text-center mb-8\">\n              <h1 className=\"text-3xl font-bold mb-2\">Đăng Nhập</h1>\n              <p className=\"text-gray-400\">\n                Đăng nhập để bắt đầu cuộc phiêu lưu của bạn\n              </p>\n            </div>\n\n            {error && (\n              <div className=\"mb-6 p-3 bg-red-900/50 text-red-200 rounded-lg\">\n                {error}\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit}>\n              <div className=\"mb-6\">\n                <label htmlFor=\"email\" className=\"block text-gray-300 mb-2\">\n                  Email\n                </label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleChange}\n                  className=\"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Nhập email của bạn\"\n                  required\n                />\n              </div>\n\n              <div className=\"mb-6\">\n                <div className=\"flex justify-between mb-2\">\n                  <label htmlFor=\"password\" className=\"text-gray-300\">\n                    Mật khẩu\n                  </label>\n                  <Link\n                    href=\"/forgot-password\"\n                    className=\"text-blue-400 hover:text-blue-300 transition-colors text-sm\"\n                  >\n                    Quên mật khẩu?\n                  </Link>\n                </div>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  name=\"password\"\n                  value={formData.password}\n                  onChange={handleChange}\n                  className=\"w-full bg-gray-700 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Nhập mật khẩu của bạn\"\n                  required\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className={`w-full py-3 rounded-lg text-white font-bold transition-colors ${\n                  loading\n                    ? \"bg-blue-700 cursor-wait\"\n                    : \"bg-blue-600 hover:bg-blue-700\"\n                }`}\n              >\n                {loading ? (\n                  <div className=\"flex items-center justify-center\">\n                    <svg\n                      className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        className=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"4\"\n                      ></circle>\n                      <path\n                        className=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      ></path>\n                    </svg>\n                    Đang đăng nhập...\n                  </div>\n                ) : (\n                  \"Đăng nhập\"\n                )}\n              </button>\n            </form>\n\n            <div className=\"mt-6 text-center\">\n              <p className=\"text-gray-400\">\n                Chưa có tài khoản?{\" \"}\n                <Link\n                  href=\"/register\"\n                  className=\"text-blue-400 hover:text-blue-300 transition-colors\"\n                >\n                  Đăng ký ngay\n                </Link>\n              </p>\n            </div>\n\n            <div className=\"mt-8\">\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t border-gray-700\"></div>\n                </div>\n                <div className=\"relative flex justify-center text-sm\">\n                  <span className=\"px-2 bg-gray-800 text-gray-400\">\n                    Hoặc đăng nhập với\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"mt-6 grid grid-cols-1 gap-3\">\n                <button\n                  onClick={() => (window.location.href = \"/api/auth/google\")}\n                  className=\"w-full py-3 px-4 rounded-lg border border-gray-700 bg-gray-700 hover:bg-gray-600 transition-colors flex items-center justify-center\"\n                >\n                  <svg className=\"h-5 w-5 mr-2\" viewBox=\"0 0 24 24\">\n                    <g transform=\"matrix(1, 0, 0, 1, 27.009001, -39.238998)\">\n                      <path\n                        fill=\"#4285F4\"\n                        d=\"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z\"\n                      />\n                      <path\n                        fill=\"#34A853\"\n                        d=\"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z\"\n                      />\n                      <path\n                        fill=\"#FBBC05\"\n                        d=\"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z\"\n                      />\n                      <path\n                        fill=\"#EA4335\"\n                        d=\"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z\"\n                      />\n                    </g>\n                  </svg>\n                  Google\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-8 text-center\">\n          <Link\n            href=\"/\"\n            className=\"text-gray-400 hover:text-white transition-colors\"\n          >\n            ← Quay lại trang chủ\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default function LoginPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"min-h-screen bg-gray-900 text-white flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"animate-pulse text-2xl font-bold mb-4\">\n              Đang tải...\n            </div>\n            <div className=\"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin mx-auto\"></div>\n          </div>\n        </div>\n      }\n    >\n      <LoginForm />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQA,SAAS;;IACP,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,WAAW,aAAa,GAAG,CAAC,eAAe;IACjD,MAAM,EAAE,eAAe,EAAE,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,UAAO,AAAD;IAEnE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,OAAO;QACP,UAAU;IACZ;IACA,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,IAAI,iBAAiB;gBACnB,OAAO,IAAI,CAAC;YACd;QACF;8BAAG;QAAC;QAAiB;QAAQ;KAAS;IAEtC,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY;YACV,GAAG,QAAQ;YACX,CAAC,KAAK,EAAE;QACV;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,mBAAmB;YAEpC,6CAA6C;YAC7C,MAAM;QAEN,qFAAqF;QACvF,EAAE,OAAO,KAAc;YACrB,MAAM,QAAQ;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,SACE,MAAM,QAAQ,EAAE,MAAM,WAAW;YAEnC,WAAW;QACb;IACF;IAEA,IAAI,eAAe,iBAAiB;QAClC,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACZ,kBAAkB,yBAAyB;;;;;;kCAE9C,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;IAIvB;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAA0B;;;;;;kDACxC,6LAAC;wCAAE,WAAU;kDAAgB;;;;;;;;;;;;4BAK9B,uBACC,6LAAC;gCAAI,WAAU;0CACZ;;;;;;0CAIL,6LAAC;gCAAK,UAAU;;kDACd,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAM,SAAQ;gDAAQ,WAAU;0DAA2B;;;;;;0DAG5D,6LAAC;gDACC,MAAK;gDACL,IAAG;gDACH,MAAK;gDACL,OAAO,SAAS,KAAK;gDACrB,UAAU;gDACV,WAAU;gDACV,aAAY;gDACZ,QAAQ;;;;;;;;;;;;kDAIZ,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAM,SAAQ;wDAAW,WAAU;kEAAgB;;;;;;kEAGpD,6LAAC,+JAAA,CAAA,UAAI;wDACH,MAAK;wDACL,WAAU;kEACX;;;;;;;;;;;;0DAIH,6LAAC;gDACC,MAAK;gDACL,IAAG;gDACH,MAAK;gDACL,OAAO,SAAS,QAAQ;gDACxB,UAAU;gDACV,WAAU;gDACV,aAAY;gDACZ,QAAQ;;;;;;;;;;;;kDAIZ,6LAAC;wCACC,MAAK;wCACL,UAAU;wCACV,WAAW,CAAC,8DAA8D,EACxE,UACI,4BACA,iCACJ;kDAED,wBACC,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDACC,WAAU;oDACV,OAAM;oDACN,MAAK;oDACL,SAAQ;;sEAER,6LAAC;4DACC,WAAU;4DACV,IAAG;4DACH,IAAG;4DACH,GAAE;4DACF,QAAO;4DACP,aAAY;;;;;;sEAEd,6LAAC;4DACC,WAAU;4DACV,MAAK;4DACL,GAAE;;;;;;;;;;;;gDAEA;;;;;;mDAIR;;;;;;;;;;;;0CAKN,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAE,WAAU;;wCAAgB;wCACR;sDACnB,6LAAC,+JAAA,CAAA,UAAI;4CACH,MAAK;4CACL,WAAU;sDACX;;;;;;;;;;;;;;;;;0CAML,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAI,WAAU;;;;;;;;;;;0DAEjB,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAK,WAAU;8DAAiC;;;;;;;;;;;;;;;;;kDAMrD,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CACC,SAAS,IAAO,OAAO,QAAQ,CAAC,IAAI,GAAG;4CACvC,WAAU;;8DAEV,6LAAC;oDAAI,WAAU;oDAAe,SAAQ;8DACpC,cAAA,6LAAC;wDAAE,WAAU;;0EACX,6LAAC;gEACC,MAAK;gEACL,GAAE;;;;;;0EAEJ,6LAAC;gEACC,MAAK;gEACL,GAAE;;;;;;0EAEJ,6LAAC;gEACC,MAAK;gEACL,GAAE;;;;;;0EAEJ,6LAAC;gEACC,MAAK;gEACL,GAAE;;;;;;;;;;;;;;;;;gDAGF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAQhB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,+JAAA,CAAA,UAAI;wBACH,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;GApOS;;QACQ,qIAAA,CAAA,YAAS;QACH,qIAAA,CAAA,kBAAe;QAEyB,kIAAA,CAAA,UAAO;;;KAJ7D;AAsOM,SAAS;IACtB,qBACE,6LAAC,6JAAA,CAAA,WAAQ;QACP,wBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCAAwC;;;;;;kCAGvD,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;kBAKrB,cAAA,6LAAC;;;;;;;;;;AAGP;MAjBwB","debugId":null}}]
}